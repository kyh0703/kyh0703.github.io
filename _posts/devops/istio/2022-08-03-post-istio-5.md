---
published: true
title: "istio - 5"
categories:
  - Istio
tags:
  - [istio]
toc: true
toc_sticky: true
date: "2022-08-03 10:30"
---

### Prefix Routing

```yaml
kind: VirtualService
apiVersion: networking.istio.io/v1alpha3
metadata:
  name: fleetman-webapp
  namespace: default
spec:
  hosts: # which incoming host are we applying the proxy rules to???
    - "*"
  gateways:
    - ingress-gateway-configuration
  http:
    - match:
        - uri: # IF
            prefix: "/experimental"
        - uri: # OR
            prefix: "/canary"
      route: # THEN
        - destination:
            host: fleetman-webapp
            subset: experimental
    - match:
        - uri:
            prefix: "/"
      route:
        - destination:
            host: fleetman-webapp
            subset: original
```

[이스티오문서](https://istio.io/latest/docs/reference/config/networking/virtual-service/)
